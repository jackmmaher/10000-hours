---
phase: 02-audio-feedback
plan: 02
type: execute
---

<objective>
Integrate audio feedback into session completion and milestone celebration flows.

Purpose: Wire up the audio system to actual app events so users hear feedback at key moments.
Output: Audio plays on session complete and milestone reached (when enabled).
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-audio-feedback/02-01-SUMMARY.md
@src/hooks/useAudioFeedback.ts
@src/components/Timer.tsx
@src/components/MilestoneCelebration.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add audio to session completion</name>
  <files>src/components/Timer.tsx</files>
  <action>
Import and use audio feedback in Timer component:

```typescript
import { useAudioFeedback } from '@/hooks/useAudioFeedback'

// In component:
const audioFeedback = useAudioFeedback()

// In the session complete handler (where success haptic is triggered):
// Add alongside existing haptic:
tapFeedback.success()
audioFeedback.complete()  // Add this line
```

Find the location where `tapFeedback.success()` is called on session complete (around line 46 based on codebase analysis) and add audio feedback there.

The audio hook already checks if enabled internally, so no conditional needed.
  </action>
  <verify>Complete a meditation session with audio enabled - should hear chime</verify>
  <done>Session completion plays audio chime (when setting enabled)</done>
</task>

<task type="auto">
  <name>Task 2: Add audio to milestone celebration</name>
  <files>src/components/MilestoneCelebration.tsx</files>
  <action>
Import and use audio feedback in MilestoneCelebration component:

```typescript
import { useAudioFeedback } from '@/hooks/useAudioFeedback'

// In component:
const audioFeedback = useAudioFeedback()

// In the useEffect that triggers when milestone is shown:
useEffect(() => {
  if (milestone) {
    audioFeedback.milestone()  // Add this
  }
}, [milestone])
```

The milestone sound should play when the celebration overlay appears.
  </action>
  <verify>Reach a milestone with audio enabled - should hear achievement tone</verify>
  <done>Milestone celebration plays audio (when setting enabled)</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Audio feedback integration for session complete and milestones</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Go to Settings â†’ Enable "Audio feedback"
    3. Verify: Preview sound plays when toggle enabled
    4. Start a short meditation session (1 minute)
    5. Complete the session
    6. Verify: Completion chime plays (gentle ascending arpeggio)
    7. If near a milestone, verify milestone sound plays (brighter tone)
    8. Toggle audio OFF in settings
    9. Complete another session
    10. Verify: No sound plays when disabled
  </how-to-verify>
  <resume-signal>Type "approved" if audio works correctly, or describe issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] Completion chime plays on session end (when enabled)
- [ ] Milestone sound plays on celebration (when enabled)
- [ ] No sounds when setting disabled
- [ ] Sounds are subtle, not jarring
</verification>

<success_criteria>

- All tasks completed
- Audio integrates cleanly with existing flows
- User has full control via settings
- Phase 02 complete
</success_criteria>

<output>
After completion, create `.planning/phases/02-audio-feedback/02-02-SUMMARY.md`
</output>
