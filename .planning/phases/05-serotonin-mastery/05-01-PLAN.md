---
phase: 05-serotonin-mastery
plan: 01
type: execute
---

<objective>
Add mastery language (tier labels) and tier transition celebrations to Voice system.

Purpose: Give narrative meaning to Voice scores through named tiers, triggering serotonin through identity and status.
Output: Voice tier labels, tier transition celebration, enhanced Voice display.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@src/lib/voice.ts
@src/components/VoiceBadge.tsx
@src/components/VoiceDetailModal.tsx

**Current Voice tiers (numeric):**
- 0-19: New (1 dot)
- 20-44: Growing (2 dots)
- 45-69: Established (3-4 dots)
- 70+: High (5 dots + glow)

**Target tier labels:**
- Newcomer (0-19)
- Practitioner (20-44)
- Established (45-69)
- Respected (70-84)
- Mentor (85+)

**Serotonin trigger:** Named identity > numeric score for status perception
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add tier labels to voice.ts</name>
  <files>src/lib/voice.ts</files>
  <action>
Add tier labeling system:

```typescript
export type VoiceTier = 'newcomer' | 'practitioner' | 'established' | 'respected' | 'mentor'

export interface VoiceTierInfo {
  tier: VoiceTier
  label: string
  description: string
  minScore: number
  maxScore: number
}

const VOICE_TIERS: VoiceTierInfo[] = [
  {
    tier: 'newcomer',
    label: 'Newcomer',
    description: 'Beginning the path',
    minScore: 0,
    maxScore: 19
  },
  {
    tier: 'practitioner',
    label: 'Practitioner',
    description: 'Developing a practice',
    minScore: 20,
    maxScore: 44
  },
  {
    tier: 'established',
    label: 'Established',
    description: 'A steady presence',
    minScore: 45,
    maxScore: 69
  },
  {
    tier: 'respected',
    label: 'Respected',
    description: 'Wisdom recognized',
    minScore: 70,
    maxScore: 84
  },
  {
    tier: 'mentor',
    label: 'Mentor',
    description: 'Guiding others on the path',
    minScore: 85,
    maxScore: 100
  }
]

export function getVoiceTier(score: number): VoiceTierInfo {
  return VOICE_TIERS.find(t => score >= t.minScore && score <= t.maxScore) || VOICE_TIERS[0]
}

export function getNextTier(currentTier: VoiceTier): VoiceTierInfo | null {
  const currentIndex = VOICE_TIERS.findIndex(t => t.tier === currentTier)
  return currentIndex < VOICE_TIERS.length - 1 ? VOICE_TIERS[currentIndex + 1] : null
}
```

Tier names are zen-flavored, not gamified (no "Bronze/Silver/Gold").
  </action>
  <verify>getVoiceTier returns correct tier for various scores</verify>
  <done>Voice tier labels defined</done>
</task>

<task type="auto">
  <name>Task 2: Update VoiceBadge to show tier label</name>
  <files>src/components/VoiceBadge.tsx</files>
  <action>
Enhance VoiceBadge to optionally show tier label:

```tsx
import { getVoiceTier, VoiceTierInfo } from '@/lib/voice'

interface VoiceBadgeProps {
  score: number
  showLabel?: boolean  // New prop to show tier name
  compact?: boolean
}

export function VoiceBadge({ score, showLabel = false, compact = false }: VoiceBadgeProps) {
  const tier = getVoiceTier(score)

  return (
    <div className="flex items-center gap-2">
      {/* Existing dot visualization */}
      <div className="flex items-center gap-1">
        {/* ... existing dots ... */}
      </div>

      {/* Optional tier label */}
      {showLabel && (
        <span className={cn(
          "text-xs font-medium",
          tier.tier === 'mentor' && "text-accent",
          tier.tier === 'respected' && "text-accent/80",
          tier.tier === 'established' && "text-ink-soft",
          (tier.tier === 'practitioner' || tier.tier === 'newcomer') && "text-ink-soft/70"
        )}>
          {tier.label}
        </span>
      )}
    </div>
  )
}
```

Keep dots for quick visual scanning, add label for context.
  </action>
  <verify>VoiceBadge shows tier label when showLabel=true</verify>
  <done>VoiceBadge enhanced with tier labels</done>
</task>

<task type="auto">
  <name>Task 3: Add tier transition tracking and celebration</name>
  <files>src/lib/voice.ts, src/components/TierCelebration.tsx</files>
  <action>
Track tier changes and create celebration component:

```typescript
// In voice.ts:
export async function checkTierTransition(
  userId: string,
  newScore: number
): Promise<{ upgraded: boolean; newTier: VoiceTierInfo } | null> {
  // Get previous voice score from storage
  const previousScore = await getPreviousVoiceScore(userId)
  if (previousScore === null) return null

  const previousTier = getVoiceTier(previousScore)
  const currentTier = getVoiceTier(newScore)

  if (currentTier.tier !== previousTier.tier && newScore > previousScore) {
    return { upgraded: true, newTier: currentTier }
  }

  return null
}
```

```tsx
// TierCelebration.tsx:
export function TierCelebration({ tier, onDismiss }: { tier: VoiceTierInfo; onDismiss: () => void }) {
  const tapFeedback = useTapFeedback()
  const audioFeedback = useAudioFeedback()

  useEffect(() => {
    tapFeedback.success()
    audioFeedback.milestone()

    // Auto-dismiss after 3 seconds (slightly longer than regular milestone)
    const timeout = setTimeout(onDismiss, 3000)
    return () => clearTimeout(timeout)
  }, [])

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-bg-overlay/60 backdrop-blur-sm">
      <div className="text-center p-8">
        <p className="text-4xl font-serif text-ink mb-4">{tier.label}</p>
        <p className="text-sm text-ink-soft">{tier.description}</p>
        <p className="text-xs text-ink-soft/60 mt-6">Your voice in the community</p>
      </div>
    </div>
  )
}
```

Zen styling - simple, elegant, not flashy.
  </action>
  <verify>Tier transition triggers celebration</verify>
  <done>Tier tracking and celebration implemented</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] All 5 tiers defined with zen-flavored labels
- [ ] VoiceBadge can show tier name
- [ ] Tier transitions are tracked
- [ ] Celebration appears on tier upgrade
</verification>

<success_criteria>

- All tasks completed
- Voice has narrative meaning through tier labels
- Tier transitions feel like achievements
- Serotonin triggered through identity labeling
</success_criteria>

<output>
After completion, create `.planning/phases/05-serotonin-mastery/05-01-SUMMARY.md`
</output>
