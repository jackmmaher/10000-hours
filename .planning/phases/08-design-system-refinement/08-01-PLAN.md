---
phase: 08-design-system-refinement
plan: 01
type: execute
domain: design-ui-skills
---

<objective>
Formalize the spacing system with strict CSS variables and migrate Tailwind usage to constrained scale.

Purpose: Eliminate arbitrary spacing values (10px, 20px, 40px) that signal "not designed by a human." Establish the non-negotiable spacing scale from the Human-Crafted Design skill.
Output: CSS spacing variables, updated Tailwind config, documentation of semantic spacing rules.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./08-01-SUMMARY.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Source files:**
@src/index.css
@tailwind.config.js

**Analysis context:**
The SWOT analysis identified these spacing violations:
- `px-5` (20px) used throughout Card.tsx - not in scale
- `mb-10` (40px) used in Settings.tsx - not in scale
- `text-[10px]` arbitrary values - off scale
- No semantic spacing documentation

**Human-Crafted Design Scale:**
```
4, 8, 12, 16, 24, 32, 48, 64, 96, 128
```

**Semantic Rules to Document:**
- Related elements: 8-16px apart
- Distinct groups: 24-48px apart
- Major sections: 64-128px apart
- Within components: Use 8, 12, 16 only
- Between components: Use 24, 32, 48
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add spacing CSS variables to index.css</name>
  <files>src/index.css</files>
  <action>
Add spacing scale CSS variables to the :root section after the existing SYSTEM variables (around line 122):

```css
/* === SPACING SCALE === */
/* Non-negotiable scale: adjacent values differ by at least 25% */
--space-1: 4px;
--space-2: 8px;
--space-3: 12px;
--space-4: 16px;
--space-6: 24px;
--space-8: 32px;
--space-12: 48px;
--space-16: 64px;
--space-24: 96px;
--space-32: 128px;
```

Do NOT change any existing variables or styles in this task - only add the new spacing variables.
  </action>
  <verify>grep "space-1" src/index.css returns the new variables</verify>
  <done>10 spacing variables added to :root, no other changes</done>
</task>

<task type="auto">
  <name>Task 2: Extend Tailwind config to use spacing variables</name>
  <files>tailwind.config.js</files>
  <action>
Add spacing extension to theme.extend that maps to CSS variables. This allows gradual migration while maintaining backward compatibility:

```javascript
spacing: {
  // Design system spacing (prefer these)
  'ds-1': 'var(--space-1)',   // 4px
  'ds-2': 'var(--space-2)',   // 8px
  'ds-3': 'var(--space-3)',   // 12px
  'ds-4': 'var(--space-4)',   // 16px
  'ds-6': 'var(--space-6)',   // 24px
  'ds-8': 'var(--space-8)',   // 32px
  'ds-12': 'var(--space-12)', // 48px
  'ds-16': 'var(--space-16)', // 64px
  'ds-24': 'var(--space-24)', // 96px
  'ds-32': 'var(--space-32)', // 128px
},
```

Add inside theme.extend object. This adds `p-ds-4`, `m-ds-6`, `gap-ds-3` etc. utilities.

Do NOT remove existing Tailwind spacing - this is additive for gradual migration.
  </action>
  <verify>grep "ds-4" tailwind.config.js returns the new spacing config</verify>
  <done>Tailwind extended with ds-* spacing utilities mapped to CSS variables</done>
</task>

<task type="auto">
  <name>Task 3: Create SPACING.md documentation</name>
  <files>.planning/codebase/SPACING.md</files>
  <action>
Create documentation file with:

1. The spacing scale and values
2. Semantic usage rules (related elements, distinct groups, major sections)
3. Tailwind mapping (ds-* classes)
4. Migration guidance (which Tailwind values map to which ds-* values)
5. Anti-patterns to avoid (arbitrary values, values outside scale)

Include a mapping table:
| Old Tailwind | New ds-* | Pixels | Use Case |
|--------------|----------|--------|----------|
| p-1 | p-ds-1 | 4px | Tight spacing |
| p-2 | p-ds-2 | 8px | Related elements |
| p-3 | p-ds-3 | 12px | Component internal |
| p-4 | p-ds-4 | 16px | Standard spacing |
| p-5 | p-ds-6 | 24px | Group separation (NOTE: p-5=20px → round to 24px) |
| p-6 | p-ds-6 | 24px | Group separation |
| p-8 | p-ds-8 | 32px | Section spacing |
| etc. | | | |

Note: px-5 (20px) should migrate to p-ds-6 (24px) - the skill says "if you think you need 20px, you're wrong—use 16 or 24."
  </action>
  <verify>cat .planning/codebase/SPACING.md shows complete documentation</verify>
  <done>SPACING.md created with scale, rules, mapping table, and migration guidance</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `grep "space-1" src/index.css` returns 10 spacing variables
- [ ] `grep "ds-4" tailwind.config.js` returns spacing config
- [ ] `.planning/codebase/SPACING.md` exists with full documentation
- [ ] `npm run build` succeeds without errors
</verification>

<success_criteria>
- Spacing CSS variables defined in :root
- Tailwind extended with ds-* spacing utilities
- Documentation created for team reference
- No breaking changes to existing styles
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/08-design-system-refinement/08-01-SUMMARY.md`
</output>
